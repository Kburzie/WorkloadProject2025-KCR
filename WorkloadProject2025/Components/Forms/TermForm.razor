@inject TermService termService

<MudDialog>
    <DialogContent>
        <EditForm Model="term" OnValidSubmit="Save">
            <DataAnnotationsValidator />
            <MudStack Spacing="2">
                <MudTextField For="@(() => term.Name)"
                                    @bind-Value="term.Name"
                              Label="Term Name"
                                    Required="true"
                                    Adornment="Adornment.Start"
                                    AdornmentIcon="@Icons.Material.Filled.CalendarMonth" />

                <MudDatePicker For="@(() => term.StartDate)"
                               @bind-Date="term.StartDate"
                               Label="Start Date"
                               DateFormat="MM/dd/yyyy"
                               PickerVariant="PickerVariant.Dialog"
                               Variant="Variant.Filled"
                               Adornment="Adornment.End"
                               AdornmentIcon="@Icons.Material.Filled.CalendarToday" />

                <MudDatePicker For="@(() => term.EndDate)"
                               @bind-Date="term.EndDate"
                               Label="End Date"
                               DateFormat="MM/dd/yyyy"
                               PickerVariant="PickerVariant.Dialog"
                               Variant="Variant.Filled"
                               Adornment="Adornment.End"
                               AdornmentIcon="@Icons.Material.Filled.CalendarToday" />
            </MudStack>
            <MudCardActions Class="d-flex justify-end mt-4">
                <MudButton Variant="Variant.Text" Color="Color.Secondary" OnClick="Cancel">Cancel</MudButton>
                <MudStaticButton Variant="Variant.Text" Color="Color.Secondary" FormAction="FormAction.Submit">Save</MudStaticButton>
            </MudCardActions>
        </EditForm>
    </DialogContent>
</MudDialog>

@code {
    [CascadingParameter]
    IMudDialogInstance MudDialog { get; set; } = default!;

    [Parameter]
    public EventCallback OnSaved { get; set; }

    private Term term { get; set; } = new Term();

    private void Cancel()
    {
        MudDialog.Cancel();
    }

    private async Task Save()
    {
        await termService.AddAsync(term);
        await OnSaved.InvokeAsync();
        term = new Term();
        MudDialog.Close(DialogResult.Ok(true));
        StateHasChanged();
    }
}
